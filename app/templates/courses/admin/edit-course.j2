{% extends "admin/base.j2" %}
{% from "macros/form.j2" import btn, input_form_6, input_form_12 %}
{% from "macros/pictures.j2" import display_image %}

{% block admin_content %}
  <form class="row g-3" action="{{ url_for('admin_courses.edit_course', course_id=course_id) }}"
    method="post" enctype="multipart/form-data">
    <h1>Редактирование курса</h1>
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <p><a class="btn btn-secondary" href="{{ url_for('admin_courses.index') }}">Вернуться</a></p>
    {{ input_form_6(form.category_id) }}
    {{ input_form_6(form.title) }}
    {{ input_form_6(form.alias) }}
    {{ input_form_12(form.description) }}
    {{ input_form_12(form.image, id="image_input", data_input="image_input") }}

    {{ display_image(image, course.title, "image_input") }}

    {{ input_form_12(form.level) }}
    {{ input_form_12(form.duration) }}
    {{ input_form_12(form.about, style="height: 150px") }}
    {{ input_form_12(form.about_photo, id="about_photo_input", data_input="about_photo_input") }}

    {{ display_image(about_photo, course.title, "about_photo_input") }}

    {{ input_form_12(form.information, style="height: 150px") }}
    {{ input_form_12(form.features, style="height: 150px") }}
    {{ input_form_12(form.skills, style="height: 150px") }}

    <h2>Работы студентов</h2>
    <ul>
    {% for student_work in student_works %}
      <li>
        <a href="{{ url_for('admin_courses.edit_studentwork', studentwork_id=student_work.id) }}">
            <h6>{{ student_work.title }}</h6>
            <img src="{{ url_for('static', filename='upload/' + student_work.photo) }}" alt="{{ student_work.title }}" width="100" height="100">
        </a>
        <a href="{{ url_for('admin_courses.delete_studentwork', studentwork_id=student_work.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Вы уверены, что хотите удалить эту работу студента?');">Удалить</a>
      </li>
    {% endfor %}
    </ul>

    {{ input_form_12(form.registration_form, style="height: 150px") }}
    {{ input_form_12(form.registration_photo, id="registration_photo_input", data_input="registration_photo_input") }}

    {{ display_image(registration_photo, course.title, "registration_photo_input") }}

    {{ input_form_12(form.artist_photo, id="artist_photo_input", data_input="artist_photo_input") }}

    {{ display_image(artist_photo, course.title, "artist_photo_input") }}

    {{ input_form_12(form.artist, style="height: 150px") }}
    {# {{ input_form_12(form.artist_work, id="artist_work_input", data_input="artist_work_input") }}

    {{ display_image(artist_work, course.title, "artist_work_input") }} #}

    <!-- Вывод всех работ мастера курса -->
    <h2>Работы мастеров</h2>
    <ul>
    {% for artist in artists %}
      <li>
      {{ loop.index }}
        <h6>{{ artist.user.first_name }}</h6>
        {#
        <a href="{{ url_for('admin_courses.edit_artistwork', artist_id=artist.id) }}">
            <img src="{{ url_for('static', filename='upload/' + artistwork.photo) }}" alt="{{ artistwork.title }}" width="100">
        </a>
        <a href="{{ url_for('admin_courses.delete_artistwork', artistwork_id=artistwork.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Вы уверены, что хотите удалить эту работу мастера?');">Удалить</a>
        #}
      </li>
    {% endfor %}
    </ul>


    {{ input_form_12(form.price, style="height: 150px") }}
    {{ input_form_12(form.final_registration_form, style="height: 150px") }}
    {{ input_form_12(form.start_date) }}
    {{ input_form_12(form.end_date) }}
    {{ input_form_12(form.modules, style="height: 100px")}}
    {{ btn(form.submit, value="Изменить") }}
    <p><a class="btn btn-secondary" href="{{ url_for('admin_courses.index') }}">Вернуться</a></p>
  </form>
{% endblock admin_content %}
